# 1.MiniC编译器

## 1.1编译器的功能

在表达式版的基础上，还支持如下的功能：

1. 无符号整数支持 8 进制和 16 进制，八进制以 0 开头，16 进制以 0x 或 0X 开头。
2. 支持单目运算符求负运算-。
3. 支持乘法*、除法/、求余%运算

源代码位置：[MmM808/minic](https://github.com/MmM808/minic)

## 1.2具体实现

前端：antlr4、flex/bision、递归下降三种方式均实现

IR：Dragon IR

后端：arm32

## 1.3文件结构

~~~text
+---doc
+---src
|   +---.vs
|   +---.vscode
|   +---backend
|   |   \---arm32
|   +---CMake
|   +---frontend
|   |   +---antlr4
|   |   |   +---.antlr
|   |   |   \---autogenerated
|   |   +---flexbison
|   |   |   \---autogenerated
|   |   \---recursivedescent
|   +---ir
|   |   +---Generator
|   |   +---Instructions
|   |   +---Types
|   |   \---Values
|   +---symboltable
|   +---thirdparty
|   |   \---antlr4
|   \---utils
\---tests
~~~

doc放置实验报告，src放置实验源代码，tests放置测试用例源代码

## 1.4项目构建

```bash
cd src
mkdir build && cd build# cmake根据CMakeLists.txt进行配置与检查，这里使用clang编译器并且是Debug模式
cmake -B build -S . -G Ninja -DCMAKE_BUILD_TYPE=Debug -DCMAKE_CXX_COMPILER:FILEPATH=/usr/bin/clang++
# cmake，其中--parallel说明是并行编译，也可用-j选项
cmake --build build --parallel
cmake ..
cmake --build .
```

## 1.5实验运行

在tests 目录下存放了针对新增功能的测试用例，可以根据src文件夹中的readme进行测试

主要测试在线上测评平台完成

## 1.6使用方法

在Ubuntu 22.04平台上运行。支持的命令如下所示：

```shell
./build/minic -S -T -o ./tests/test1-1.png ./tests/test1-1.c

./build/minic -S -T -A -o ./tests/test1-1.png ./tests/test1-1.c

./build/minic -S -T -D -o ./tests/test1-1.png ./tests/test1-1.c

./build/minic -S -I -o ./tests/test1-1.ir ./tests/test1-1.c

./build/minic -S -I -A -o ./tests/test1-1.ir ./tests/test1-1.c

./build/minic -S -I -D -o ./tests/test1-1.ir ./tests/test1-1.c

./build/minic -S -o ./tests/test1-1.s ./tests/test1-1.c

./build/minic -S -A -o ./tests/test1-1.s ./tests/test1-1.c

./build/minic -S -D -o ./tests/test1-1.s ./tests/test1-1.c
```
## 1.7详细信息
具体可阅读[详细文档](doc/README.md)。






